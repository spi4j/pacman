<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
	<extension
		point="org.eclipse.ui.handlers">
		<handler
			class="fr.pacman.soa.ui.handlers.SoaGeneratorsHandler"
			commandId="fr.pacman.soa.ui.commands.SoaGeneratorCommand">
		</handler>
	</extension>
	<extension
		point="org.eclipse.ui.menus">
		<menuContribution
			locationURI="popup:org.eclipse.ui.popup.any?after=additions">
			<menu
				id="fr.pacman.ui.menus.generators"
				icon="icons/safran.png"
				tooltip="Liste des générateurs Safr@n"
				label="Safr@n">
				<command
					commandId="fr.pacman.soa.ui.commands.SoaGeneratorCommand"
					id="fr.pacman.soa.ui.menus.SoaGeneratorCommand"
					icon="icons/safran.png"
					label="Génération SOA">
					<visibleWhen
						checkEnabled="false">
						<with
							variable="selection">
							<iterate
								ifEmpty="false"
								operator="and">
								<or>
									<instanceof
										value="org.obeonetwork.dsl.soa.Service">
									</instanceof>
									<instanceof
										value="org.obeonetwork.dsl.soa.Component">
									</instanceof>
									<instanceof
										value="org.obeonetwork.dsl.environment.DTO">
									</instanceof>
									<and>
										<instanceof
											value="org.eclipse.core.resources.IFile">
										</instanceof>
										<test
											property="org.eclipse.core.resources.extension"
											value="soa">
										</test>
									</and>
									<test
										property="fr.pacman.commons.ui.testNamespaceSoa"
										forcePluginActivation="true">
									</test>
								</or>
							</iterate>
						</with>
					</visibleWhen>
				</command>
			</menu>
		</menuContribution>
	</extension>
	<extension
		point="org.eclipse.ui.commands">
		<category
			id="fr.pacman.soa.ui.commands.generatorsCategory"
			name="Generators">
		</category>
		<command
			categoryId="fr.pacman.soa.ui.commands.generatorsCategory"
			id="fr.pacman.soa.ui.commands.SoaGeneratorCommand"
			name="fr::pacman::soa::generateServerSoa">
		</command>
	</extension>
	<extension
		point="org.eclipse.core.expressions.propertyTesters">
		<propertyTester
			class="fr.pacman.commons.ui.PacmanUIPropertyTester"
			id="fr.pacman.commons.ui.property.test.eobject"
			namespace="fr.pacman.commons.ui"
			properties="testNamespaceSoa"
			type="org.eclipse.emf.ecore.EObject">
		</propertyTester>
	</extension>
</plugin>

